#!/usr/bin/env node
"use strict";exports.__esModule=!0;var chokidar=require("chokidar"),path=require("path"),yargs=require("yargs"),index_1=require("./index"),args=yargs.describe("ext","File extension used for index files and internal filter").describe("log","Enable log messages when modules are evaluated").describe("name","File name used for the index files").describe("watch","Enables watch mode").argv;index_1.default(args._[0],{fileExtension:args.ext,fileName:args.name}).then(function(e){e.forEach(function(e){var a=e.rc,n=e.options,i=e.message;args.log&&console.log(i),args.watch&&chokidar.watch(path.dirname(a),{ignored:[!new RegExp("."+n.fileExtension+"$"),n.fileName+"."+n.fileExtension]}).on("all",function(){index_1.default(a,n).then(function(e){e.forEach(function(e){var a=e.code,n=e.message;args.log&&["add","update","remove"].includes(a)&&console.log(n)})})})})});